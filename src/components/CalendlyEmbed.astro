---
import { siteConfig } from '../../site.config';

const calendlyEmbedUrl = `${siteConfig.calendlyUrl}?hide_gdpr_banner=1&background_color=fafaf7&primary_color=2B5F4E`;
---

<div class="calendly-embed">
  <!-- Calendly inline widget -->
  <div
    class="calendly-inline-widget"
    data-url={calendlyEmbedUrl}
    style="min-width:320px;height:1200px;"
  ></div>

  <!-- Calendly script -->
  <script is:inline src="https://assets.calendly.com/assets/external/widget.js" async></script>

  <div class="calendly-fallback">
    <p>
      Falls das Buchungsformular nicht l√§dt:
    </p>
    <div class="calendly-fallback-actions">
      <a href={siteConfig.calendlyUrl} target="_blank" rel="noopener" class="btn btn-primary">
        Direkt auf Calendly buchen
      </a>
      <a href={`tel:${siteConfig.phoneTel}`} class="btn btn-secondary">
        {siteConfig.phone}
      </a>
    </div>
  </div>
</div>

<style>
  .calendly-embed {
    position: relative;
    width: 100%;
  }

  .calendly-inline-widget {
    width: 100%;
  }

  @media (max-width: 768px) {
    .calendly-inline-widget {
      height: 1400px !important;
    }
  }

  .calendly-fallback {
    text-align: center;
    padding: 2rem;
    background: var(--color-bg-alt);
    border-radius: var(--border-radius);
    margin-top: 1rem;
  }

  .calendly-fallback p {
    color: var(--color-text-light);
    margin-bottom: 1rem;
  }

  .calendly-fallback-actions {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
  }
</style>
